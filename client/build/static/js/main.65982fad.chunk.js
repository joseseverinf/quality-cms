(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{313:function(e,t,a){},405:function(e,t,a){},407:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(50),i=a.n(c),o=(a(313),a(28)),s=a(24),l=a(12),d=a(15),u=Object(n.createContext)(),j=a(32),b=a.n(j),f=a(25),O=a.n(f),p=a.p+"static/media/Logo.ebe8e63c.png",g=a(2),h=function(e){var t=Object(s.f)();return Object(g.jsx)(l.d,{className:"recuadro-reg-log",children:Object(g.jsxs)(l.l,{children:[Object(g.jsxs)(l.b,{xs:12,sm:6,md:6,lg:6,className:"espaciado2 alineacion",children:[Object(g.jsx)("img",{src:p,width:"300",alt:"logo"}),Object(g.jsx)("h2",{children:"\xa1Bienvenido!"}),Object(g.jsx)("p",{children:"Si eres usuario nuevo, haz click en Registrarse"}),Object(g.jsx)("p",{children:"Si ya posees una cuenta creada, haz click en Login"})]}),Object(g.jsxs)(l.b,{xs:12,sm:6,md:6,lg:6,className:"espaciado3 alineacion",children:[Object(g.jsx)(l.a,{color:"success",size:"lg",onClick:function(e){t("/register")},style:{marginRight:"10px",marginTop:"100px"},children:"Registrarse"}),Object(g.jsx)(l.a,{color:"primary",size:"lg",onClick:function(e){t("/login")},style:{marginTop:"100px"},children:"Login"})]})]})})},x=a(81),m=a(82),v=a(83),w=a(56),C=function(e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.d,{fluid:!0,className:"espaciado recuadro-reg-log",children:[Object(g.jsx)(l.l,{children:Object(g.jsxs)(l.b,{xs:12,sm:12,md:12,lg:12,className:"alineacion",children:[Object(g.jsx)("img",{src:p,width:"200",alt:"logo"}),Object(g.jsx)("h3",{children:"Panel de Control de Quality Pellets NET"}),Object(g.jsx)("p",{children:"A continuaci\xf3n, selecciona uno de los m\xf3dulos para visualizar lo que necesites trabajar"})]})}),Object(g.jsxs)(l.l,{className:"espaciado3",children:[Object(g.jsx)(l.b,{className:"alineaci\xf3n textos-dash",xs:6,sm:6,md:6,lg:3,children:Object(g.jsxs)(o.b,{to:"../clientes/",children:[Object(g.jsx)(x.a,{color:"blue",style:{marginRight:"10px",fontSize:"100",textAlign:"center"}}),Object(g.jsx)("p",{children:"Nuestros Clientes"})]})}),Object(g.jsx)(l.b,{className:"alineaci\xf3n textos-dash",xs:6,sm:6,md:6,lg:3,children:Object(g.jsxs)(o.b,{to:"../estufas/",children:[Object(g.jsx)(m.a,{color:"red",style:{marginRight:"10px",fontSize:"100",textAlign:"center"}}),Object(g.jsx)("p",{children:"Estufas y Calderas"})]})}),Object(g.jsx)(l.b,{className:"alineaci\xf3n textos-dash",xs:6,sm:6,md:6,lg:3,children:Object(g.jsxs)(o.b,{to:"../ventas/",children:[Object(g.jsx)(v.a,{color:"green",style:{marginRight:"10px",fontSize:"100",textAlign:"center"}}),Object(g.jsx)("p",{children:"Ventas de Pellets y Estufas"})]})}),Object(g.jsx)(l.b,{className:"alineaci\xf3n textos-dash",xs:6,sm:6,md:6,lg:3,children:Object(g.jsxs)(o.b,{to:"../mantenciones/",children:[Object(g.jsx)(w.b,{color:"grey",style:{marginRight:"10px",fontSize:"100",textAlign:"center"}}),Object(g.jsx)("p",{children:"Instalaci\xf3n y Mantenciones"})]})})]})]})})},R=a(122),y=a(22),P=a(9),E=a(115),S=a.n(E),N=a(70),T=a(105),A=a.n(T),z=a(119),D=a.n(z),I=a(104),M=a.n(I),k=a(97),F=a.n(k),B=a(60),L=a.n(B),q=a(61),V=a.n(q),_=a(103),U=a.n(_),J=a(102),W=a.n(J),Q=a(100),Z=a.n(Q),$=a(99),G=a.n($),H=a(98),K=a.n(H),X=a(95),Y=a.n(X),ee=a(101),te=a.n(ee),ae=a(96),ne=a.n(ae),re=a(94),ce=a.n(re),ie=a(121),oe=a.n(ie),se=a(120),le=a.n(se),de=a(262),ue={Add:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(A.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,sx:{fontSize:30}}))})),Check:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(M.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(V.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(U.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,color:"error"}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(L.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(W.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,color:"primary"}))})),Export:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(te.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(Z.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(G.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(K.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(L.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(F.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(V.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(ne.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(D.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(Y.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(ce.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))}))},je=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],s=i[1],u=/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;Object(n.useEffect)((function(){b.a.get("/api/clientes").then((function(e){r(e.data.data)})).catch((function(e){return O.a.fire("Error",e.message,"error")}))}),[o]);var j=Object(n.useState)([{title:"Id",field:"_id",hidden:!0,filtering:!1},{title:"Nombre",field:"firstName",editComponent:function(e){return Object(g.jsx)(de.a,{id:"firstName",label:"Nombre",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!e.firstName||!(e.firstName.length<3||e.firstName.length>50)||{isValid:!1,helperText:"El Nombre debe tener m\xe1s de 3 y menos de 50 caracteres."}}},{title:"Apellido",field:"lastName",editComponent:function(e){return Object(g.jsx)(de.a,{id:"lastName",label:"Apellido",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!e.lastName||!(e.lastName.length<3||e.lastName.length>50)||{isValid:!1,helperText:"El Apellido debe tener m\xe1s de 3 y menos de 50 caracteres."}}},{title:"Rut",field:"rut",editComponent:function(e){return Object(g.jsx)(de.a,{id:"rut",label:"Rut",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!e.rut||!(e.rut.length<8||e.rut.length>12)||{isValid:!1,helperText:"El Rut debe tener m\xe1s de 8 y menos de 12 caracteres."}}},{title:"Email",field:"email",editComponent:function(e){return Object(g.jsx)(de.a,{id:"email",label:"Email",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},filtering:!1,validate:function(e){return!(e.email&&!u.test(e.email))||{isValid:!1,helperText:"Ingrese un Email v\xe1lido."}}},{title:"Tel\xe9fono",field:"phone",filtering:!1,editComponent:function(e){return Object(g.jsx)(de.a,{id:"phone",label:"Tel\xe9fono",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!e.phone||!(e.phone.length<8||e.phone.length>11)||{isValid:!1,helperText:"El Tel\xe9fono debe tener m\xe1s de 8 y menos de 12 caracteres."}}},{title:"Convenio",field:"agreement",type:"boolean"},{title:"Descuento %",field:"discount",type:"numeric",editComponent:function(e){return Object(g.jsx)(de.a,{type:"number",id:"discount",label:"Descuento",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})},filtering:!1},{title:"Activo",field:"active",hidden:!0,filtering:!1}]),f=Object(d.a)(j,2),p=f[0];f[1];return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(l.d,{fluid:!0,className:"espaciado",children:Object(g.jsx)(l.l,{children:Object(g.jsx)(l.b,{children:Object(g.jsx)(S.a,{title:"",columns:p,data:a,icons:ue,localization:{toolbar:{exportTitle:"Exportar",searchTooltip:"Buscar",searchPlaceholder:"Buscar",showColumnsTitle:"Mostrar Columnas"},header:{actions:"Acciones"},body:{addTooltip:"Crear",editTooltip:"Editar",deleteTooltip:"Eliminar",editRow:{deleteText:"Est\xe1 seguro que desea eliminar el cliente",cancelTooltip:"Cancelar",saveTooltip:"Aceptar"},emptyDataSourceMessage:"No hay registros que mostrar"},pagination:{labelRowsSelect:"filas",labelDisplayedRows:"{from}-{to} de {count}",labelRowsPerPage:"Filas por p\xe1gina:",firstAriaLabel:"Primera p\xe1gina",firstTooltip:"Primera p\xe1gina",previousAriaLabel:"P\xe1gina anterior",previousTooltip:"P\xe1gina anterior",nextAriaLabel:"Siguiente p\xe1gina",nextTooltip:"Siguiente p\xe1gina",lastAriaLabel:"\xdaltima p\xe1gina",lastTooltip:"\xdaltima p\xe1gina"},grouping:{placeholder:"Arrastra los encabezados aqu\xed para agruparlos",groupedBy:"Agrupados por: "}},options:{addRowPosition:"first",searchFieldAlignment:"left",exportMenu:[{label:"Exportar como PDF",exportFunc:function(e,t){return Object(N.ExportPdf)(e,t,"Clientes")}},{label:"Exportar como CSV",exportFunc:function(e,t){return Object(N.ExportCsv)(e,t,"Clientes")}}],grouping:!0,filtering:!0,columnsButton:!0},editable:{onRowAdd:function(e){return new Promise((function(t,n){e&&0!==Object.keys(e).length?(e.active=!0,e.agreement||(e.agreement=!1,e.discount=0),e.discount||(e.discount=0),b.a.post("/api/clientes",e).then((function(e){console.log(e),e.data.ok?r([e.data.data].concat(Object(y.a)(a))):O.a.fire("Error al crear el cliente",e.data.message,"error"),t()})).catch((function(e){console.log(e),O.a.fire("Error al crear el cliente",null===e||void 0===e?void 0:e.message,"error"),t()}))):t()}))},onRowUpdate:function(e,t){return new Promise((function(n,c){b.a.put("/api/clientes/".concat(e._id),e).then((function(c){if(c.data.ok){var i=Object(y.a)(a),o=i.find((function(e){return e.id===t.tableData.id})),s=i.indexOf(o);i[s]=e,r(Object(y.a)(i))}else O.a.fire("Error al actualizar el cliente",c.data.message,"error");n()})).catch((function(e){console.log(e),O.a.fire("Error al actualizar el cliente",null===e||void 0===e?void 0:e.message,"error"),n()}))}))},onRowDelete:function(e){return new Promise((function(t,n){e.active=!1,b.a.put("/api/clientes/".concat(e._id),e).then((function(n){if(n.data.ok){var c=Object(y.a)(a),i=c.find((function(t){return t.id===e.tableData.id})),o=c.indexOf(i);c.splice(o,1),r(Object(y.a)(c))}else O.a.fire("Error al eliminar el cliente",n.data.message,"error");t()})).catch((function(e){console.log(e),O.a.fire("Error al eliminar el cliente",null===e||void 0===e?void 0:e.message,"error"),t()}))}))}},actions:[{icon:function(){return Object(g.jsx)(le.a,{color:"action",sx:{fontSize:30}})},tooltip:"Refrescar Datos",isFreeAction:!0,onClick:function(){return s(!o)}},{icon:function(){return Object(g.jsx)(oe.a,{color:"secondary"})},tooltip:"Detalle",onClick:function(e,t){return O.a.fire({html:"\n                                    <row>\n                                        <h3>Est\xe1s visualizando al cliente:</h3>\n                                        <hr>\n                                        <col>\n                                                <p><b>Nombre:</b> ".concat(t.firstName," ").concat(t.lastName,"</p>\n                                                <p><b>Rut:</b> ").concat(t.rut,"</p>\n                                                <p><b>Tel\xe9fono:</b> ").concat(t.phone,"</p>\n                                                <p><b>Email:</b> ").concat(t.email,"</p>\n                                                <p><b>Convenio:</b> ").concat(t.agreement,"</p>\n                                                <p><b>Descuento:</b> ").concat(t.discount,"</p>\n                                        </col>\n                                    </row>\n                                    "),focusConfirm:!1,focusCancel:!1,customClass:{container:"swal-wide",popup:"swal-wide",header:"swal-wide",closeButton:"swal-wide",icon:"swal-wide",image:"swal-wide",content:"swal-wide",actions:"swal-wide",confirmButton:"swal-wide",cancelButton:"swal-wide",footer:"swal-wide"},showClass:{popup:"animated fadeIn faster",actions:"animated fadeIn faster",confirmButton:"animated zoomIn faster",cancelButton:"animated zoomIn faster"}},JSON.stringify(t))}}]})})})})})},be=function(e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.d,{fluid:!0,className:"recuadro-nc",children:[Object(g.jsxs)(l.l,{children:[Object(g.jsx)(l.b,{xs:4,sm:4,md:3,lg:3,className:"espaciado4 alineacion",children:Object(g.jsx)(o.b,{to:"/",children:Object(g.jsx)("img",{src:p,width:"150",alt:"logo"})})}),Object(g.jsx)(l.b,{xs:4,sm:4,md:6,lg:6,className:"espaciado4 alineacion-left",children:Object(g.jsxs)("h3",{children:[Object(g.jsx)(x.a,{color:"blue",style:{marginRight:"10px",fontSize:"50",textAlign:"center"}}),"Nuestros Clientes"]})}),Object(g.jsxs)(l.b,{xs:4,sm:4,md:3,lg:3,className:"espaciado4 alineacion-right",children:[Object(g.jsx)(o.b,{to:"/",children:Object(g.jsx)(R.a,{color:"black",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../estufas/",children:Object(g.jsx)(m.a,{color:"red",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../ventas/",children:Object(g.jsx)(v.a,{color:"green",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../mantenciones/",children:Object(g.jsx)(w.b,{color:"gray",size:32,style:{marginRight:"10px"}})})]})]}),Object(g.jsx)(l.l,{children:Object(g.jsx)(s.c,{children:Object(g.jsx)(s.a,{path:"/",element:Object(g.jsx)(je,{})})})})]})})},fe=a(5),Oe=a(290),pe={username:"",password:""},ge=function(e){var t=Object(n.useState)(pe),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(n.useContext)(u),j=Object(s.f)(),b=function(e){var t=e.target,a=t.name,n=t.value;c(Object(P.a)(Object(P.a)({},r),{},Object(fe.a)({},a,n)))};return Object(g.jsx)(l.d,{className:"espaciado2 recuadro-reg-log",children:Object(g.jsxs)(l.l,{children:[Object(g.jsx)(l.b,{xs:12,md:6,lg:6,className:"espaciado2 alineacion",children:Object(g.jsx)("img",{src:p,width:"300",alt:"logo"})}),Object(g.jsxs)(l.b,{xs:12,md:6,lg:6,className:"espaciado3",children:[Object(g.jsx)("h2",{children:"Ingresar"}),Object(g.jsxs)(l.e,{onSubmit:function(e){e.preventDefault(),i.login(r)},children:[Object(g.jsx)(l.l,{children:Object(g.jsxs)(l.b,{xs:12,md:8,lg:8,children:[Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.h,{children:"E-mail:"}),Object(g.jsx)(l.g,{type:"text",name:"username",placeholder:"Ingresa tu e-mail",value:r.username,onChange:b,required:!0,maxLength:50})]}),Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.h,{children:"Contrase\xf1a:"}),Object(g.jsx)(l.g,{type:"password",name:"password",placeholder:"Ingresa tu contrase\xf1a",value:r.password,onChange:b,required:!0,minLength:6})]})]})}),Object(g.jsxs)(l.l,{children:[Object(g.jsx)(l.b,{xs:6,md:3,children:Object(g.jsx)(l.a,{color:"primary",type:"submit",children:"Ingresar"})}),Object(g.jsx)(l.b,{xs:6,md:3,children:Object(g.jsx)(l.a,{type:"button",onClick:function(e){null===e||void 0===e||e.stopPropagation(),j("/auth")},children:"Cancelar"})})]}),Object(g.jsx)(l.l,{children:Object(g.jsx)(l.b,{xs:12,className:"espaciado3",children:Object(g.jsxs)("p",{children:["\xbfNo tienes una cuenta creada?, reg\xedstrate aqu\xed"," ",Object(g.jsx)(o.b,{to:"/register/",children:Object(g.jsx)(Oe.a,{color:"green",style:{marginRight:"10px",fontSize:"30",textAlign:"center"}})})]})})})]})]})]})})},he=a(291),xe={name:"",email:"",password:"",confirmPassword:""},me=function(e){var t=Object(n.useState)(xe),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(s.f)(),u=function(e){var t=e.target,a=t.name,n=t.value;c(Object(P.a)(Object(P.a)({},r),{},Object(fe.a)({},a,n)))},j=function(e){null===e||void 0===e||e.stopPropagation(),i("/auth")};return Object(g.jsx)(l.d,{className:"espaciado2 recuadro-reg-log",children:Object(g.jsxs)(l.l,{children:[Object(g.jsx)(l.b,{xs:12,md:6,lg:6,className:"espaciado2 alineacion",children:Object(g.jsx)("img",{src:p,width:"300",alt:"logo"})}),Object(g.jsxs)(l.b,{xs:12,md:6,lg:6,className:"espaciado3",children:[Object(g.jsx)("h2",{children:"Registrarse"}),Object(g.jsxs)(l.e,{onSubmit:function(e){e.preventDefault(),b.a.post("/api/register",r).then((function(e){e.data.ok?(O.a.fire("Registro de Usuarios",e.data.message,"success"),j()):O.a.fire("Registro de Usuarios",e.data.message,"error")})).catch((function(e){console.log(e)}))},children:[Object(g.jsxs)(l.b,{xs:12,md:8,lg:8,children:[Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.h,{children:"Nombre y Apellido:"}),Object(g.jsx)(l.g,{type:"text",name:"name",placeholder:"Ingresa tu Nombre y Apellido",value:r.name,onChange:u,required:!0,maxLength:50})]}),Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.h,{children:"Email:"}),Object(g.jsx)(l.g,{type:"email",name:"email",placeholder:"Ingresa tu e-mail",value:r.email,onChange:u,required:!0})]}),Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.h,{children:"Perfil:"}),Object(g.jsxs)(l.g,{type:"select",name:"profile",value:r.profile,onChange:u,required:!0,children:[Object(g.jsx)("option",{value:"",children:"Seleccione un Perfil"}),Object(g.jsx)("option",{value:"admin",children:"Administrador"}),Object(g.jsx)("option",{value:"user",children:"Usuario"})]})]}),Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.h,{children:"Contrase\xf1a:"}),Object(g.jsx)(l.g,{type:"password",name:"password",placeholder:"Ingresa una contrase\xf1a m\xednimo de 6 d\xedgitos",value:r.password,onChange:u,required:!0,minLength:6})]}),Object(g.jsxs)(l.f,{children:[Object(g.jsx)(l.h,{children:"Confirmar Contrase\xf1a:"}),Object(g.jsx)(l.g,{type:"password",name:"confirmPassword",placeholder:"La contrase\xf1a debe coincidir",value:r.confirmPassword,onChange:u,required:!0,minLength:6})]})]}),Object(g.jsxs)(l.l,{children:[Object(g.jsx)(l.b,{xs:6,md:3,children:Object(g.jsx)(l.a,{color:"success",type:"submit",children:"Registrarse"})}),Object(g.jsx)(l.b,{xs:6,md:3,children:Object(g.jsx)(l.a,{type:"button",onClick:j,children:"Cancelar"})})]}),Object(g.jsx)(l.l,{children:Object(g.jsx)(l.b,{xs:12,className:"espaciado3",children:Object(g.jsxs)("p",{children:["Si ya tienes una cuenta, haz click aqu\xed"," ",Object(g.jsx)(o.b,{to:"/login/",children:Object(g.jsx)(he.a,{color:"blue",style:{marginRight:"10px",fontSize:"30",textAlign:"center"}})})]})})})]})]})]})})},ve=function(e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(l.d,{children:Object(g.jsx)(l.l,{children:Object(g.jsx)(l.b,{className:"footer",children:Object(g.jsxs)("p",{children:[Object(g.jsx)("a",{href:"https://www.qualitypellets.cl",children:"Sitio Web Quality Pellets"})," \xb7 +56 9 6509 8393 Quality Pellets Chile, es representante de 2D Electr\xf3nica en la V Regi\xf3n"]})})})})})},we=function(e){var t=Object(n.useContext)(u);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(l.d,{children:Object(g.jsx)(l.l,{children:Object(g.jsx)(l.b,{children:Object(g.jsxs)(l.i,{color:"dark",dark:!0,expand:"md",fixed:"top",full:!0,light:!0,className:"estilo-top",children:[Object(g.jsxs)(l.j,{children:[Object(g.jsx)("img",{src:p,width:"150",alt:"logo"})," "]}),Object(g.jsx)(l.c,{navbar:!0}),t.user&&Object(g.jsx)(l.k,{children:Object(g.jsxs)("h4",{children:["Bienvenido ",t.user.name,"."]})}),t.user&&Object(g.jsx)(l.k,{children:Object(g.jsxs)(l.a,{color:"primary",size:"md",style:{marginLeft:"30px"},onClick:function(e){t.logout()},children:[Object(g.jsx)(w.a,{color:"white",style:{marginRight:"10px",fontSize:"25",textAlign:"center"}}),"Salir"]})})]})})})}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),Object(g.jsx)("br",{})]})},Ce={Add:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(A.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,sx:{fontSize:30}}))})),Check:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(M.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(V.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(U.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,color:"error"}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(L.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(W.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,color:"primary"}))})),Export:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(te.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(Z.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(G.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(K.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(L.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(F.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(V.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(ne.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(D.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(Y.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(ce.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))}))},Re=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],s=i[1];Object(n.useEffect)((function(){b.a.get("/api/estufas").then((function(e){r(e.data.data)})).catch((function(e){return O.a.fire("Error",e.message,"error")}))}),[o]);var u=Object(n.useState)([{title:"Id",field:"_id",hidden:!0,filtering:!1},{title:"Nombre",field:"stoveName",editComponent:function(e){return Object(g.jsx)(de.a,{id:"stoveName",label:"Nombre",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!e.stoveName||!(e.stoveName.length<3||e.stoveName.length>50)||{isValid:!1,helperText:"El Nombre de la estufa debe tener m\xe1s de 3 y menos de 50 caracteres."}}},{title:"Marca",field:"stoveBrand",editComponent:function(e){return Object(g.jsx)(de.a,{id:"stoveBrand",label:"Marca",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!(e.stoveBrand&&e.stoveBrand.length<3)||{isValid:!1,helperText:"La Marca de la estufa debe contener m\xednimo 3 caracteres."}}},{title:"Modelo",field:"stoveModel",editComponent:function(e){return Object(g.jsx)(de.a,{id:"stoveModel",label:"Modelo",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!(e.stoveModel&&e.stoveModel.length<3)||{isValid:!1,helperText:"El Modelo de la estufa debe contener m\xednimo 3 caracteres."}}},{title:"C\xf3digo",field:"stoveCode",editComponent:function(e){return Object(g.jsx)(de.a,{id:"stoveCode",label:"C\xf3digo",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!(e.stoveCode&&e.stoveCode.length<4)||{isValid:!1,helperText:"El C\xf3digo de la estufa debe contener m\xednimo 4 caracteres."}}},{title:"Color",field:"stoveColor",editComponent:function(e){return Object(g.jsx)(de.a,{id:"stoveColor",label:"Color",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})},filtering:!1},{title:"Pa\xeds Origen",field:"stoveOrigin",filtering:!1,editComponent:function(e){return Object(g.jsx)(de.a,{id:"stoveOrigin",label:"Pa\xeds Origen",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Cantidad",field:"stoveAmount",filtering:!1,editComponent:function(e){return Object(g.jsx)(de.a,{type:"number",id:"stoveAmount",label:"Cantidad",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},defaultValue:0})},type:"numeric"},{title:"Precio Unitario",field:"stoveUnitPrice",filtering:!1,type:"currency",currencySetting:{locale:"es",currencyCode:"CLP",minimumFractionDigits:0,maximumFractionDigits:0},editComponent:function(e){return Object(g.jsx)(de.a,{type:"number",id:"stoveUnitPrice",label:"Precio Unitario CLP",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)},helperText:e.helperText,error:e.error})},validate:function(e){return!(e.stoveUnitPrice&&e.stoveUnitPrice<=0)||{isValid:!1,helperText:"El Precio Unitario debe ser mayor a 0."}}},{title:"Im\xe1gen",field:"stoveImage",filtering:!1,editComponent:function(e){return Object(g.jsx)(de.a,{id:"stoveImage",label:"Im\xe1gen",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})},render:function(e){return Object(g.jsx)("img",{src:e.stoveImage,style:{width:60,borderRadius:"50%"}})}},{title:"Caracter\xedsticas",field:"stoveCharacteristic",editComponent:function(e){return Object(g.jsx)(de.a,{id:"stoveCharacteristic",label:"Caracter\xedsticas",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})},filtering:!1},{title:"Activo",field:"active",hidden:!0,filtering:!1}]),j=Object(d.a)(u,2),f=j[0];j[1];return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(l.d,{fluid:!0,className:"espaciado",children:Object(g.jsx)(l.l,{children:Object(g.jsx)(l.b,{children:Object(g.jsx)(S.a,{title:"",columns:f,data:a,icons:Ce,localization:{toolbar:{exportTitle:"Exportar",searchTooltip:"Buscar",searchPlaceholder:"Buscar",showColumnsTitle:"Mostrar Columnas"},header:{actions:"Acciones"},body:{addTooltip:"Crear",editTooltip:"Editar",deleteTooltip:"Eliminar",editRow:{deleteText:"Est\xe1 seguro que desea eliminar el Producto",cancelTooltip:"Cancelar",saveTooltip:"Aceptar"},emptyDataSourceMessage:"No hay registros que mostrar"},pagination:{labelRowsSelect:"filas",labelDisplayedRows:"{from}-{to} de {count}",labelRowsPerPage:"Filas por p\xe1gina:",firstAriaLabel:"Primera p\xe1gina",firstTooltip:"Primera p\xe1gina",previousAriaLabel:"P\xe1gina anterior",previousTooltip:"P\xe1gina anterior",nextAriaLabel:"Siguiente p\xe1gina",nextTooltip:"Siguiente p\xe1gina",lastAriaLabel:"\xdaltima p\xe1gina",lastTooltip:"\xdaltima p\xe1gina"},grouping:{placeholder:"Arrastra los encabezados aqu\xed para agruparlos",groupedBy:"Agrupados por: "}},options:{addRowPosition:"first",searchFieldAlignment:"left",exportMenu:[{label:"Exportar como PDF",exportFunc:function(e,t){return Object(N.ExportPdf)(e,t,"Productos")}},{label:"Exportar como CSV",exportFunc:function(e,t){return Object(N.ExportCsv)(e,t,"Productos")}}],grouping:!0,filtering:!0,columnsButton:!0},editable:{onRowAdd:function(e){return new Promise((function(t,n){e&&0!==Object.keys(e).length?(e.active=!0,b.a.post("/api/estufas",e).then((function(e){console.log(e),e.data.ok?r([e.data.data].concat(Object(y.a)(a))):O.a.fire("Error al crear el producto",e.data.message,"error"),t()})).catch((function(e){console.log(e),O.a.fire("Error al crear el producto",null===e||void 0===e?void 0:e.message,"error"),t()}))):t()}))},onRowUpdate:function(e,t){return new Promise((function(n,c){b.a.put("/api/estufas/".concat(e._id),e).then((function(c){if(c.data.ok){var i=Object(y.a)(a),o=i.find((function(e){return e.id===t.tableData.id})),s=i.indexOf(o);i[s]=e,r(Object(y.a)(i))}else O.a.fire("Error al actualizar el producto",c.data.message,"error");n()})).catch((function(e){console.log(e),O.a.fire("Error al actualizar el producto",null===e||void 0===e?void 0:e.message,"error"),n()}))}))},onRowDelete:function(e){return new Promise((function(t,n){e.active=!1,b.a.put("/api/estufas/".concat(e._id),e).then((function(n){if(n.data.ok){var c=Object(y.a)(a),i=c.find((function(t){return t.id===e.tableData.id})),o=c.indexOf(i);c.splice(o,1),r(Object(y.a)(c))}else O.a.fire("Error al eliminar el producto",n.data.message,"error");t()})).catch((function(e){console.log(e),O.a.fire("Error al eliminar el producto",null===e||void 0===e?void 0:e.message,"error"),t()}))}))}},actions:[{icon:function(){return Object(g.jsx)(le.a,{color:"action",sx:{fontSize:30}})},tooltip:"Refrescar Datos",isFreeAction:!0,onClick:function(){return s(!o)}},{icon:function(){return Object(g.jsx)(oe.a,{color:"secondary"})},tooltip:"Detalle",onClick:function(e,t){return O.a.fire({html:"\n              <row>\n                  <h3>Est\xe1s visualizando una Estufa:</h3>\n                  <hr>\n                  <col>\n                          <p><b>Nombre:</b> ".concat(t.stoveName,"</p>\n                          <p><b>Marca:</b> ").concat(t.stoveBrand,"</p>\n                          <p><b>Modelo:</b> ").concat(t.stoveModel,"</p>\n                          <p><b>C\xf3digo:</b> ").concat(t.stoveCode,"</p>\n                          <p><b>Color:</b> ").concat(t.stoveColor,"</p>\n                          <p><b>Pa\xeds de Origen:</b>").concat(t.stoveOrigin,"</p>          \n                          <p><b>Precio:</b> ").concat(t.stoveAmount,"</p>\n                          <p><b>Precio Unitario:</b> ").concat(t.stoveUnitPrice,"</p>\n                          <p><b>Imagen:</b> <img src=").concat(t.stoveImage,' alt="Imagen" width="100"/></p>\n                          <p><b>Caracter\xedsticas:</b> ').concat(t.stoveCharacteristic,"</p>\n                  </col>\n              </row>\n              "),focusConfirm:!1,focusCancel:!1,customClass:{container:"swal-wide",popup:"swal-wide",header:"swal-wide",closeButton:"swal-wide",icon:"swal-wide",image:"swal-wide",content:"swal-wide",actions:"swal-wide",confirmButton:"swal-wide",cancelButton:"swal-wide",footer:"swal-wide"},showClass:{popup:"animated fadeIn faster",actions:"animated fadeIn faster",confirmButton:"animated zoomIn faster",cancelButton:"animated zoomIn faster"}},JSON.stringify(t))}}]})})})})})},ye=function(e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.d,{fluid:!0,className:"recuadro-nc",children:[Object(g.jsxs)(l.l,{children:[Object(g.jsx)(l.b,{xs:4,sm:4,md:3,lg:3,className:"espaciado4 alineacion",children:Object(g.jsx)(o.b,{to:"/",children:Object(g.jsx)("img",{src:p,width:"150",alt:"logo"})})}),Object(g.jsx)(l.b,{xs:4,sm:4,md:6,lg:6,className:"espaciado4 alineacion-left",children:Object(g.jsxs)("h3",{children:[Object(g.jsx)(m.a,{color:"red",style:{marginRight:"10px",fontSize:"50",textAlign:"center"}}),"Estufas y Calderas"]})}),Object(g.jsxs)(l.b,{xs:4,sm:4,md:3,lg:3,className:"espaciado4 alineacion-right",children:[Object(g.jsx)(o.b,{to:"/",children:Object(g.jsx)(R.a,{color:"black",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../clientes/",children:Object(g.jsx)(x.a,{color:"blue",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../ventas/",children:Object(g.jsx)(v.a,{color:"green",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../mantenciones/",children:Object(g.jsx)(w.b,{color:"gray",size:32,style:{marginRight:"10px"}})})]})]}),Object(g.jsx)(l.l,{children:Object(g.jsx)(s.c,{children:Object(g.jsx)(s.a,{path:"/",element:Object(g.jsx)(Re,{})})})})]})})},Pe=a(481),Ee={Add:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(A.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,sx:{fontSize:30}}))})),Check:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(M.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(V.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(U.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,color:"error"}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(L.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(W.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,color:"primary"}))})),Export:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(te.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(Z.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(G.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(K.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(L.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(F.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(V.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(ne.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(D.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(Y.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(ce.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))}))},Se={},Ne={},Te={Efectivo:"Efectivo","Cr\xe9dito":"Cr\xe9dito","D\xe9bito":"D\xe9bito",Transferencia:"Transferencia"},Ae={},ze=["Efectivo","Cr\xe9dito","D\xe9bito","Transferencia"],De=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!1),o=Object(d.a)(i,2),s=o[0],u=o[1],j=Object(n.useState)({}),f=Object(d.a)(j,2),p=f[0],h=f[1],x=Object(n.useState)({}),m=Object(d.a)(x,2),v=m[0],w=m[1],C=Object(n.useState)(!1),R=Object(d.a)(C,2),E=R[0],T=R[1];Object(n.useEffect)((function(){b.a.get("/api/clientes").then((function(e){h(e.data.data);var t={};e.data.data.forEach((function(e){t[e._id.toString()]="".concat(e.firstName," ").concat(e.lastName)})),Se=t,b.a.get("/api/estufas").then((function(e){w(e.data.data),t={},e.data.data.forEach((function(e){t[e._id.toString()]="".concat(e.stoveBrand," ").concat(e.stoveModel)})),Ne=t,b.a.get("/api/usuarios").then((function(e){t={},e.data.data.forEach((function(e){t[e._id.toString()]=e.name})),Ae=t,T(!E)})).catch((function(e){return O.a.fire("Error",e.message,"error")}))})).catch((function(e){return O.a.fire("Error",e.message,"error")}))})).catch((function(e){return O.a.fire("Error",e.message,"error")}))}),[s]),Object(n.useEffect)((function(){b.a.get("/api/ventas").then((function(e){c(e.data.data)})).catch((function(e){O.a.fire("Error",e.message,"error")}))}),[s]);var A=function(e){if(e.value){var t=p.find((function(t){return t.id===e.value}));return"".concat(t.firstName," ").concat(t.lastName)}return""},z=function(e){if(e.value){var t=v.find((function(t){return t.id===e.value}));return"".concat(t.stoveBrand," ").concat(t.stoveModel)}return""},D=function(e){var t=0,a=0,n=0;if(e.product&&e.quantitie){var r=Object(y.a)(v).find((function(t){return t.id===e.product})),c=parseInt(r.stoveUnitPrice)*parseInt(e.quantitie);if(t=c,e.client){var i=Object(y.a)(p).find((function(t){return t.id===e.client}));a=Math.round(c*parseInt(i.discount)/100)}e.discount&&e.discount>0&&(n=Math.round(c*parseInt(e.discount)/100))}return t-a-n},I=Object(n.useMemo)((function(){return[{title:"Id",field:"_id",hidden:!0,filtering:!1},{title:"Cliente",field:"client",lookup:Se,editComponent:function(e){return Object(g.jsx)(Pe.a,{id:"client",options:p,getOptionLabel:function(e){return"".concat(e.firstName," ").concat(e.lastName)},renderInput:function(t){return Object(g.jsx)(de.a,Object(P.a)(Object(P.a)({},t),{},{variant:"outlined",label:A(e),fullWidth:!0}))},onChange:function(t,a){if(a){e.onChange(a._id);var n=Object(P.a)({},e.rowData);n.client=a._id,n.salePrice=D(n),e.onRowDataChange(n)}}})}},{title:"Producto",field:"product",lookup:Ne,editComponent:function(e){return Object(g.jsx)(Pe.a,{id:"product",options:v,getOptionLabel:function(e){return"".concat(e.stoveBrand," ").concat(e.stoveModel)},renderInput:function(t){return Object(g.jsx)(de.a,Object(P.a)(Object(P.a)({},t),{},{variant:"outlined",label:z(e),fullWidth:!0}))},onChange:function(t,a){if(a){e.onChange(a._id);var n=Object(P.a)({},e.rowData);n.product=a._id,n.salePrice=D(n),e.onRowDataChange(n)}}})}},{title:"Cantidad",field:"quantitie",type:"numeric",editComponent:function(e){return Object(g.jsx)(de.a,{id:"quantitie",type:"number",label:"Cantidad",variant:"outlined",value:e.value,onChange:function(t){e.onChange(t.target.value);var a=Object(P.a)({},e.rowData);a.quantitie=t.target.value,a.salePrice=D(a),e.onRowDataChange(a)}})}},{title:"Descuento %",field:"discount",type:"numeric",editComponent:function(e){return Object(g.jsx)(de.a,{id:"discount",type:"number",label:"Descuento",variant:"outlined",value:e.value,onChange:function(t){e.onChange(t.target.value);var a=Object(P.a)({},e.rowData);a.discount=t.target.value,a.salePrice=D(a),e.onRowDataChange(a)}})}},{title:"Precio de Venta",field:"salePrice",type:"currency",editable:"never",currencySetting:{locale:"es",currencyCode:"CLP",minimumFractionDigits:0,maximumFractionDigits:0},editComponent:function(e){return Object(g.jsx)(de.a,{id:"salePrice",type:"number",label:"Precio de Venta",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"M\xe9todo de Pago",field:"paymentMethod",lookup:Te,editComponent:function(e){return Object(g.jsx)(Pe.a,{id:"paymentMethod",options:ze,getOptionLabel:function(e){return e},renderInput:function(t){return Object(g.jsx)(de.a,Object(P.a)(Object(P.a)({},t),{},{variant:"outlined",label:e.value,fullWidth:!0}))},onChange:function(t,a){a&&e.onChange(a)}})}},{title:"Observaciones",field:"observations",editComponent:function(e){return Object(g.jsx)(de.a,{id:"observations",label:"Observaciones",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Fecha de Venta",field:"createdAt",editable:"never",type:"date"},{title:"Vendedor",field:"userId",editable:"never",hidden:!0,lookup:Ae},{title:"Activo",field:"active",hidden:!0,filtering:!1}]}),[E]);return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(l.d,{fluid:!0,className:"espaciado",children:Object(g.jsx)(l.l,{children:Object(g.jsx)(l.b,{children:Object(g.jsx)(S.a,{title:"",columns:I,data:r,icons:Ee,localization:{toolbar:{exportTitle:"Exportar",searchTooltip:"Buscar",searchPlaceholder:"Buscar",showColumnsTitle:"Mostrar Columnas"},header:{actions:"Acciones"},body:{addTooltip:"Crear",editTooltip:"Editar",deleteTooltip:"Eliminar",editRow:{deleteText:"Est\xe1 seguro que desea eliminar el Mantenimiento",cancelTooltip:"Cancelar",saveTooltip:"Aceptar"},emptyDataSourceMessage:"No hay registros que mostrar"},pagination:{labelRowsSelect:"filas",labelDisplayedRows:"{from}-{to} de {count}",labelRowsPerPage:"Filas por p\xe1gina:",firstAriaLabel:"Primera p\xe1gina",firstTooltip:"Primera p\xe1gina",previousAriaLabel:"P\xe1gina anterior",previousTooltip:"P\xe1gina anterior",nextAriaLabel:"Siguiente p\xe1gina",nextTooltip:"Siguiente p\xe1gina",lastAriaLabel:"\xdaltima p\xe1gina",lastTooltip:"\xdaltima p\xe1gina"},grouping:{placeholder:"Arrastra los encabezados aqu\xed para agruparlos",groupedBy:"Agrupados por: "}},options:{addRowPosition:"first",searchFieldAlignment:"left",exportMenu:[{label:"Exportar como PDF",exportFunc:function(e,t){return Object(N.ExportPdf)(e,t,"Mantenimientos")}},{label:"Exportar como CSV",exportFunc:function(e,t){return Object(N.ExportCsv)(e,t,"Mantenimientos")}}],grouping:!0,filtering:!0,columnsButton:!0},editable:{onRowAdd:function(e){return new Promise((function(t,a){if(e&&0!==Object.keys(e).length){e.active=!0,e.discount||(e.discount=0),e.quantitie||(e.quantitie=1);var n=Object(y.a)(p),i=Object(y.a)(v).find((function(t){return t.id===e.product})),o=n.find((function(t){return t.id===e.client}));if(parseInt(e.quantitie)<=parseInt(i.stoveAmount)){var s=parseInt(i.stoveUnitPrice)*parseInt(e.quantitie),l=Math.round(s*parseInt(o.discount)/100),d=Math.round(s*parseInt(e.discount)/100);e.salePrice=s-l-d,b.a.post("/api/ventas",e).then((function(e){e.data.ok?c([e.data.data].concat(Object(y.a)(r))):O.a.fire("Error al crear la Venta",e.data.message,"error"),t()})).catch((function(e){console.log(e),O.a.fire("Error al crear la Venta",null===e||void 0===e?void 0:e.message,"error"),t()}))}else O.a.fire("Error al crear la Venta","La cantidad de Estufas a vender supera el Stock disponible","error"),t()}else t()}))},onRowDelete:function(e){return new Promise((function(t,a){e.active=!1,b.a.put("/api/ventas/".concat(e._id),e).then((function(a){if(a.data.ok){var n=Object(y.a)(r),i=n.find((function(t){return t.id===e.tableData.id})),o=n.indexOf(i);n.splice(o,1),c(Object(y.a)(n))}else O.a.fire("Error al eliminar la Venta",a.data.message,"error");t()})).catch((function(e){console.log(e),O.a.fire("Error al eliminar la Venta",null===e||void 0===e?void 0:e.message,"error"),t()}))}))}},actions:[{icon:function(){return Object(g.jsx)(le.a,{color:"action",sx:{fontSize:30}})},tooltip:"Refrescar Datos",isFreeAction:!0,onClick:function(){return u(!s)}},{icon:function(){return Object(g.jsx)(oe.a,{color:"secondary"})},tooltip:"Detalle",onClick:function(e,t){var a=Object(y.a)(p),n=Object(y.a)(v).find((function(e){return e.id===t.product})),r=a.find((function(e){return e.id===t.client})),c=Object(P.a)({},t);c.client="".concat(r.firstName," ").concat(r.lastName),c.product="".concat(n.stoveBrand," ").concat(n.stoveModel),O.a.fire({html:"\n              <row>\n                  <h3>Est\xe1s visualizando el registro de venta:</h3>\n                  <hr>\n                  <col>\n                          <p><b>Cliente:</b> ".concat(c.client,"</p>\n                          <p><b>Producto:</b> ").concat(c.product,"</p>\n                          <p><b>Descuento:</b> ").concat(c.discount,"</p>\n                          <p><b>Cantidad:</b> ").concat(c.quantitie,"</p>\n                          <p><b>Precio de Venta:</b> ").concat(c.salePrice,"</p>\n                          <p><b>M\xe9todo de Pago:</b>").concat(c.paymentMethod,"</p>          \n                          <p><b>Observaciones:</b> ").concat(c.observations,"</p>\n                  </col>\n              </row>\n              "),focusConfirm:!1,focusCancel:!1,customClass:{container:"swal-wide",popup:"swal-wide",header:"swal-wide",closeButton:"swal-wide",icon:"swal-wide",image:"swal-wide",content:"swal-wide",actions:"swal-wide",confirmButton:"swal-wide",cancelButton:"swal-wide",footer:"swal-wide"},showClass:{popup:"animated fadeIn faster",actions:"animated fadeIn faster",confirmButton:"animated zoomIn faster",cancelButton:"animated zoomIn faster"}},JSON.stringify(t))}}]})})})})})},Ie=function(e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.d,{fluid:!0,className:"recuadro-nc",children:[Object(g.jsxs)(l.l,{children:[Object(g.jsx)(l.b,{xs:4,sm:4,md:3,lg:3,className:"espaciado4 alineacion",children:Object(g.jsx)(o.b,{to:"/",children:Object(g.jsx)("img",{src:p,width:"150",alt:"logo"})})}),Object(g.jsx)(l.b,{xs:4,sm:4,md:6,lg:6,className:"espaciado4 alineacion-left",children:Object(g.jsxs)("h3",{children:[Object(g.jsx)(v.a,{color:"green",style:{marginRight:"10px",fontSize:"50",textAlign:"center"}}),"Ventas de Estufas y Pellets"]})}),Object(g.jsxs)(l.b,{xs:4,sm:4,md:3,lg:3,className:"espaciado4 alineacion-right",children:[Object(g.jsx)(o.b,{to:"/",children:Object(g.jsx)(R.a,{color:"black",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../clientes/",children:Object(g.jsx)(x.a,{color:"blue",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../estufas/",children:Object(g.jsx)(m.a,{color:"red",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../mantenciones/",children:Object(g.jsx)(w.b,{color:"gray",size:32,style:{marginRight:"10px"}})})]})]}),Object(g.jsx)(l.l,{children:Object(g.jsx)(s.c,{children:Object(g.jsx)(s.a,{path:"/",element:Object(g.jsx)(De,{})})})})]})})},Me={Add:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(A.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,sx:{fontSize:30}}))})),Check:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(M.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(V.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(U.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,color:"error"}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(L.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(W.a,Object(P.a)(Object(P.a)({},e),{},{ref:t,color:"primary"}))})),Export:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(te.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(Z.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(G.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(K.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(L.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(F.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(V.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(ne.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(D.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(Y.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(g.jsx)(ce.a,Object(P.a)(Object(P.a)({},e),{},{ref:t}))}))},ke={},Fe={},Be={Agendado:"Agendado",Realizado:"Realizado",Cancelado:"Cancelado"},Le=["Agendado","Realizado","Cancelado"],qe=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!1),o=Object(d.a)(i,2),s=o[0],u=o[1],j=Object(n.useState)({}),f=Object(d.a)(j,2),p=f[0],h=f[1],x=Object(n.useState)({}),m=Object(d.a)(x,2),v=m[0],w=m[1],C=Object(n.useState)(!1),R=Object(d.a)(C,2),E=R[0],T=R[1];Object(n.useEffect)((function(){b.a.get("/api/clientes").then((function(e){h(e.data.data);var t={};e.data.data.forEach((function(e){t[e._id.toString()]="".concat(e.firstName," ").concat(e.lastName)})),ke=t,b.a.get("/api/estufas").then((function(e){w(e.data.data),t={},e.data.data.forEach((function(e){t[e._id.toString()]="".concat(e.stoveBrand," ").concat(e.stoveModel)})),Fe=t,T(!E)})).catch((function(e){return O.a.fire("Error",e.message,"error")}))})).catch((function(e){return O.a.fire("Error",e.message,"error")}))}),[s]);var A=function(e){if(e.value){var t=p.find((function(t){return t.id===e.value}));return"".concat(t.firstName," ").concat(t.lastName)}return""},z=function(e){if(e.value){var t=v.find((function(t){return t.id===e.value}));return"".concat(t.stoveBrand," ").concat(t.stoveModel)}return""};Object(n.useEffect)((function(){b.a.get("/api/mantenciones").then((function(e){c(e.data.data)})).catch((function(e){O.a.fire("Error",e.message,"error")}))}),[s]);var D=Object(n.useMemo)((function(){return[{title:"Id",field:"_id",hidden:!0,filtering:!1},{title:"Cliente",field:"client",lookup:ke,editComponent:function(e){return Object(g.jsx)(Pe.a,{id:"client",options:p,getOptionLabel:function(e){return"".concat(e.firstName," ").concat(e.lastName)},renderInput:function(t){return Object(g.jsx)(de.a,Object(P.a)(Object(P.a)({},t),{},{variant:"outlined",label:A(e),fullWidth:!0}))},onChange:function(t,a){a&&e.onChange(a._id)}})}},{title:"Producto",field:"product",lookup:Fe,editComponent:function(e){return Object(g.jsx)(Pe.a,{id:"product",options:v,getOptionLabel:function(e){return"".concat(e.stoveBrand," ").concat(e.stoveModel)},renderInput:function(t){return Object(g.jsx)(de.a,Object(P.a)(Object(P.a)({},t),{},{variant:"outlined",label:z(e),fullWidth:!0}))},onChange:function(t,a){a&&e.onChange(a._id)}})}},{title:"Estado",field:"maintenanceStatus",lookup:Be,editComponent:function(e){return Object(g.jsx)(Pe.a,{id:"maintenanceStatus",options:Le,getOptionLabel:function(e){return e},renderInput:function(t){return Object(g.jsx)(de.a,Object(P.a)(Object(P.a)({},t),{},{variant:"outlined",label:e.value,fullWidth:!0}))},onChange:function(t,a){a&&e.onChange(a)}})}},{title:"T\xe9cnico",field:"technical",editComponent:function(e){return Object(g.jsx)(de.a,{id:"technical",label:"T\xe9cnico",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Fecha",field:"scheduledDate",type:"datetime"},{title:"Observaciones",field:"observations",editComponent:function(e){return Object(g.jsx)(de.a,{id:"observations",label:"Observaciones",variant:"outlined",value:e.value,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"Activo",field:"active",hidden:!0,filtering:!1}]}),[E]);return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(l.d,{fluid:!0,className:"espaciado",children:Object(g.jsx)(l.l,{children:Object(g.jsx)(l.b,{children:Object(g.jsx)(S.a,{title:"",columns:D,data:r,icons:Me,localization:{toolbar:{exportTitle:"Exportar",searchTooltip:"Buscar",searchPlaceholder:"Buscar",showColumnsTitle:"Mostrar Columnas"},header:{actions:"Acciones"},body:{addTooltip:"Crear",editTooltip:"Editar",deleteTooltip:"Eliminar",editRow:{deleteText:"Est\xe1 seguro que desea eliminar el Mantenimiento",cancelTooltip:"Cancelar",saveTooltip:"Aceptar"},emptyDataSourceMessage:"No hay registros que mostrar"},pagination:{labelRowsSelect:"filas",labelDisplayedRows:"{from}-{to} de {count}",labelRowsPerPage:"Filas por p\xe1gina:",firstAriaLabel:"Primera p\xe1gina",firstTooltip:"Primera p\xe1gina",previousAriaLabel:"P\xe1gina anterior",previousTooltip:"P\xe1gina anterior",nextAriaLabel:"Siguiente p\xe1gina",nextTooltip:"Siguiente p\xe1gina",lastAriaLabel:"\xdaltima p\xe1gina",lastTooltip:"\xdaltima p\xe1gina"},grouping:{placeholder:"Arrastra los encabezados aqu\xed para agruparlos",groupedBy:"Agrupados por: "}},options:{addRowPosition:"first",searchFieldAlignment:"left",exportMenu:[{label:"Exportar como PDF",exportFunc:function(e,t){return Object(N.ExportPdf)(e,t,"Mantenimientos")}},{label:"Exportar como CSV",exportFunc:function(e,t){return Object(N.ExportCsv)(e,t,"Mantenimientos")}}],grouping:!0,filtering:!0,columnsButton:!0},editable:{onRowAdd:function(e){return new Promise((function(t,a){e&&0!==Object.keys(e).length?(e.active=!0,b.a.post("/api/mantenciones",e).then((function(e){e.data.ok?c([e.data.data].concat(Object(y.a)(r))):O.a.fire("Error al crear el Mantenimiento",e.data.message,"error"),t()})).catch((function(e){console.log(e),O.a.fire("Error al crear el Mantenimiento",null===e||void 0===e?void 0:e.message,"error"),t()}))):t()}))},onRowUpdate:function(e,t){return new Promise((function(a,n){b.a.put("/api/mantenciones/".concat(e._id),e).then((function(n){if(n.data.ok){var i=Object(y.a)(r),o=i.find((function(e){return e.id===t.tableData.id})),s=i.indexOf(o);i[s]=e,c(Object(y.a)(i))}else O.a.fire("Error al actualizar el Mantenimiento",n.data.message,"error");a()})).catch((function(e){console.log(e),O.a.fire("Error al actualizar el Mantenimiento",null===e||void 0===e?void 0:e.message,"error"),a()}))}))},onRowDelete:function(e){return new Promise((function(t,a){e.active=!1,b.a.put("/api/mantenciones/".concat(e._id),e).then((function(a){if(a.data.ok){var n=Object(y.a)(r),i=n.find((function(t){return t.id===e.tableData.id})),o=n.indexOf(i);n.splice(o,1),c(Object(y.a)(n))}else O.a.fire("Error al eliminar el Mantenimiento",a.data.message,"error");t()})).catch((function(e){console.log(e),O.a.fire("Error al eliminar el Mantenimiento",null===e||void 0===e?void 0:e.message,"error"),t()}))}))}},actions:[{icon:function(){return Object(g.jsx)(le.a,{color:"action",sx:{fontSize:30}})},tooltip:"Refrescar Datos",isFreeAction:!0,onClick:function(){return u(!s)}},{icon:function(){return Object(g.jsx)(oe.a,{color:"secondary"})},tooltip:"Detalle",onClick:function(e,t){var a=Object(y.a)(p),n=Object(y.a)(v).find((function(e){return e.id===t.product})),r=a.find((function(e){return e.id===t.client})),c=Object(P.a)({},t);c.client="".concat(r.firstName," ").concat(r.lastName),c.product="".concat(n.stoveBrand," ").concat(n.stoveModel),O.a.fire({html:"\n                  <row>\n                      <h3>Est\xe1s visualizando Instalaci\xf3n y Mantenci\xf3n de:</h3>\n                      <hr>\n                      <col>\n                              <p><b>Cliente:</b> ".concat(c.client,"</p>\n                              <p><b>Producto:</b> ").concat(c.product,"</p>\n                              <p><b>Estado:</b> ").concat(c.maintenanceStatus,"</p>\n                              <p><b>T\xe9cnico:</b> ").concat(c.technical,"</p>\n                              <p><b>Fecha:</b> ").concat(c.scheduledDate,"</p>\n                              <p><b>Observaciones:</b> ").concat(c.observations,"</p>\n                      </col>\n                  </row>\n                  "),focusConfirm:!1,focusCancel:!1,customClass:{container:"swal-wide",popup:"swal-wide",header:"swal-wide",closeButton:"swal-wide",icon:"swal-wide",image:"swal-wide",content:"swal-wide",actions:"swal-wide",confirmButton:"swal-wide",cancelButton:"swal-wide",footer:"swal-wide"},showClass:{popup:"animated fadeIn faster",actions:"animated fadeIn faster",confirmButton:"animated zoomIn faster",cancelButton:"animated zoomIn faster"}},JSON.stringify(c))}}]})})})})})},Ve=function(e){return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(l.d,{fluid:!0,className:"recuadro-nc",children:[Object(g.jsxs)(l.l,{children:[Object(g.jsx)(l.b,{xs:4,sm:4,md:3,lg:3,className:"espaciado4 alineacion",children:Object(g.jsx)(o.b,{to:"/",children:Object(g.jsx)("img",{src:p,width:"150",alt:"logo"})})}),Object(g.jsx)(l.b,{xs:4,sm:4,md:6,lg:6,className:"espaciado4 alineacion-left",children:Object(g.jsxs)("h3",{children:[Object(g.jsx)(w.b,{color:"grey",style:{marginRight:"10px",fontSize:"50",textAlign:"center"}}),"Instalaci\xf3n y Mantenciones"]})}),Object(g.jsxs)(l.b,{xs:4,sm:4,md:3,lg:3,className:"espaciado4 alineacion-right",children:[Object(g.jsx)(o.b,{to:"/",children:Object(g.jsx)(R.a,{color:"black",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../clientes/",children:Object(g.jsx)(x.a,{color:"blue",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../estufas/",children:Object(g.jsx)(m.a,{color:"red",size:32,style:{marginRight:"10px"}})}),Object(g.jsx)(o.b,{to:"../ventas/",children:Object(g.jsx)(v.a,{color:"green",size:32,style:{marginRight:"10px"}})})]})]}),Object(g.jsx)(l.l,{children:Object(g.jsx)(s.c,{children:Object(g.jsx)(s.a,{path:"/",element:Object(g.jsx)(qe,{})})})})]})})},_e=function(e){var t="SESSION_USER",a=Object(n.useState)(null),r=Object(d.a)(a,2),c=r[0],i=r[1],o=Object(s.f)();return Object(n.useEffect)((function(){sessionStorage.getItem(t)?(i(JSON.parse(sessionStorage.getItem(t))),o("/")):o("/auth")}),[]),Object(g.jsxs)(u.Provider,{value:{user:c,setUser:i,login:function(e){b.a.post("/api/login",e).then((function(e){e.data.ok?(i(e.data.data),sessionStorage.setItem(t,JSON.stringify(e.data.data)),O.a.fire("Login",e.data.message,"success"),o("/")):O.a.fire("Login",e.data.message,"error")})).catch((function(e){console.log(e)}))},logout:function(){i(null),sessionStorage.clear(),o("/auth")}},children:[Object(g.jsx)(we,{}),Object(g.jsxs)(s.c,{children:[Object(g.jsx)(s.a,{path:"/auth",element:Object(g.jsx)(h,{})}),Object(g.jsx)(s.a,{path:"/*",element:Object(g.jsx)(C,{})}),Object(g.jsx)(s.a,{path:"/login",element:Object(g.jsx)(ge,{})}),Object(g.jsx)(s.a,{path:"/register",element:Object(g.jsx)(me,{})}),Object(g.jsx)(s.a,{path:"/clientes/*",element:Object(g.jsx)(be,{})}),Object(g.jsx)(s.a,{path:"/estufas/*",element:Object(g.jsx)(ye,{})}),Object(g.jsx)(s.a,{path:"/ventas/*",element:Object(g.jsx)(Ie,{})}),Object(g.jsx)(s.a,{path:"/mantenciones/*",element:Object(g.jsx)(Ve,{})})]}),Object(g.jsx)(ve,{})]})};a(405);var Ue=function(){return Object(g.jsx)(l.d,{fluid:!0,className:"Fondo",children:Object(g.jsx)(o.a,{children:Object(g.jsx)(s.c,{children:Object(g.jsx)(s.a,{path:"/*",element:Object(g.jsx)(_e,{})})})})})},Je=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,633)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};a(406);i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(Ue,{})}),document.getElementById("root")),Je()}},[[407,1,2]]]);
//# sourceMappingURL=main.65982fad.chunk.js.map